<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QtJsonSerializer: QJsonTypeConverter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="display: inline;">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QtJsonSerializer
   &#160;<span id="projectnumber">3.1.2</span>
   </div>
   <div id="projectbrief">A library to perform generic seralization and deserialization of QObjects</div>
  </td>
 </tr>
 </tbody>
</table>
<a style="float: right;" target="_blank"  href="https://github.com/Skycoder42/QJsonSerializer">
<img style="padding: 10px;" src="GitHub_Logo.png"/>
</a>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_q_json_type_converter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">QJsonTypeConverter Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>An interface to create custom serializer type converters.  
 <a href="class_q_json_type_converter.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="qjsontypeconverter_8h_source.html">qjsontypeconverter.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_json_type_converter_1_1_serialization_helper.html">SerializationHelper</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper class passed to the type converter by the serializer. Do not implement yourself.  <a href="class_q_json_type_converter_1_1_serialization_helper.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a9ac88a7b6e3e954b825afd56d1558b6d"><td class="memItemLeft" align="right" valign="top"><a id="a9ac88a7b6e3e954b825afd56d1558b6d"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_json_type_converter.html#a9ac88a7b6e3e954b825afd56d1558b6d">Priority</a> : qint32 { <br />
&#160;&#160;<b>ExtremlyLow</b> = -0x00FFFFFF, 
<b>VeryLow</b> = -0x0000FFFF, 
<b>Low</b> = -0x000000FF, 
<b>Standard</b> = 0x00000000, 
<br />
&#160;&#160;<b>High</b> = 0x000000FF, 
<b>VeryHigh</b> = 0x0000FFFF, 
<b>ExtremlyHigh</b> = 0x00FFFFFF
<br />
 }</td></tr>
<tr class="memdesc:a9ac88a7b6e3e954b825afd56d1558b6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sample values for a priority value. <br /></td></tr>
<tr class="separator:a9ac88a7b6e3e954b825afd56d1558b6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a786af064dd2def05075386acf16d7bf6"><td class="memItemLeft" align="right" valign="top"><a id="a786af064dd2def05075386acf16d7bf6"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_json_type_converter.html#a786af064dd2def05075386acf16d7bf6">QJsonTypeConverter</a> ()</td></tr>
<tr class="memdesc:a786af064dd2def05075386acf16d7bf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor. <br /></td></tr>
<tr class="separator:a786af064dd2def05075386acf16d7bf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adda9592006fdf93fe5ba3efed1b46e59"><td class="memItemLeft" align="right" valign="top"><a id="adda9592006fdf93fe5ba3efed1b46e59"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_json_type_converter.html#adda9592006fdf93fe5ba3efed1b46e59">~QJsonTypeConverter</a> ()</td></tr>
<tr class="memdesc:adda9592006fdf93fe5ba3efed1b46e59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:adda9592006fdf93fe5ba3efed1b46e59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac40884acbfba06f74ce210de7aedf6ea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_json_type_converter.html#ac40884acbfba06f74ce210de7aedf6ea">priority</a> () const</td></tr>
<tr class="memdesc:ac40884acbfba06f74ce210de7aedf6ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the priority of this converter.  <a href="#ac40884acbfba06f74ce210de7aedf6ea">More...</a><br /></td></tr>
<tr class="separator:ac40884acbfba06f74ce210de7aedf6ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ec07ecf9eddf8ab115735455c671def"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_json_type_converter.html#a7ec07ecf9eddf8ab115735455c671def">setPriority</a> (int <a class="el" href="class_q_json_type_converter.html#ac40884acbfba06f74ce210de7aedf6ea">priority</a>)</td></tr>
<tr class="memdesc:a7ec07ecf9eddf8ab115735455c671def"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the priority of this converter.  <a href="#a7ec07ecf9eddf8ab115735455c671def">More...</a><br /></td></tr>
<tr class="separator:a7ec07ecf9eddf8ab115735455c671def"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63168cc2f7e185f79cac9208a2e6d5e8"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_json_type_converter.html#a63168cc2f7e185f79cac9208a2e6d5e8">canConvert</a> (int metaTypeId) const =0</td></tr>
<tr class="memdesc:a63168cc2f7e185f79cac9208a2e6d5e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true, if this implementation can convert the given type.  <a href="#a63168cc2f7e185f79cac9208a2e6d5e8">More...</a><br /></td></tr>
<tr class="separator:a63168cc2f7e185f79cac9208a2e6d5e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fd5c728302100b50b49bf47a3d213d5"><td class="memItemLeft" align="right" valign="top">virtual <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qlist.html">QList</a>&lt; QJsonValue::Type &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_json_type_converter.html#a1fd5c728302100b50b49bf47a3d213d5">jsonTypes</a> () const =0</td></tr>
<tr class="memdesc:a1fd5c728302100b50b49bf47a3d213d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list of json types this implementation can deserialize.  <a href="#a1fd5c728302100b50b49bf47a3d213d5">More...</a><br /></td></tr>
<tr class="separator:a1fd5c728302100b50b49bf47a3d213d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abeeba52f509cec3eb4c80b5b7dc07604"><td class="memItemLeft" align="right" valign="top">virtual <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qjsonvalue.html">QJsonValue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_json_type_converter.html#abeeba52f509cec3eb4c80b5b7dc07604">serialize</a> (int propertyType, const <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qvariant.html">QVariant</a> &amp;value, const <a class="el" href="class_q_json_type_converter_1_1_serialization_helper.html">SerializationHelper</a> *helper) const =0</td></tr>
<tr class="memdesc:abeeba52f509cec3eb4c80b5b7dc07604"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by the serializer to serializer your given type.  <a href="#abeeba52f509cec3eb4c80b5b7dc07604">More...</a><br /></td></tr>
<tr class="separator:abeeba52f509cec3eb4c80b5b7dc07604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af162ac051c8a5c9d168a1deecf5e0ae7"><td class="memItemLeft" align="right" valign="top">virtual <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qvariant.html">QVariant</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_q_json_type_converter.html#af162ac051c8a5c9d168a1deecf5e0ae7">deserialize</a> (int propertyType, const <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qjsonvalue.html">QJsonValue</a> &amp;value, <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtautoupdater/qtautoupdater.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/class_q_object.html">QObject</a> *parent, const <a class="el" href="class_q_json_type_converter_1_1_serialization_helper.html">SerializationHelper</a> *helper) const =0</td></tr>
<tr class="memdesc:af162ac051c8a5c9d168a1deecf5e0ae7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by the deserializer to serializer your given type.  <a href="#af162ac051c8a5c9d168a1deecf5e0ae7">More...</a><br /></td></tr>
<tr class="separator:af162ac051c8a5c9d168a1deecf5e0ae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An interface to create custom serializer type converters. </p>
<p>If you have a custom class, that cannot be serialized with the converters the library has built in, you will need to create a custom type converter in order to handle your type. Implement this interface for your custom type, and add it to a serializer instance by calling <a class="el" href="class_q_json_serializer.html#a812d2ba38850dc750a31a451bcbb8781" title="Adds a custom type converter to this serializer. ">QJsonSerializer::addJsonTypeConverter</a>.</p>
<dl class="section attention"><dt>Attention</dt><dd>Most types are already covered by the converters internally used by the library. To find out if you custom type is already supported by what the library provides, either try it out out check your class against the list found in the <a class="el" href="index.html#qtjsonserializer_readme_label_4">Usage Hints</a>. You don't need a custom converter for most types.</dd></dl>
<h1><a class="anchor" id="example"></a>
Example</h1>
<p>To understand how it works, here is a small example for a custom type converter. First, the definition of the custom class.</p>
<dl class="section note"><dt>Note</dt><dd>A class like this could be easily defined as Q_GADGET, and thus would not need a custom converter. It is only done without the gadget to demonstrate how a converter could look like.</dd></dl>
<h2><a class="anchor" id="setup"></a>
Setup</h2>
<div class="fragment"><div class="line"><span class="keyword">class </span>Foo</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    Foo(<span class="keywordtype">int</span> salt, <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtautoupdater/qtautoupdater.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/class_q_object.html">QObject</a> *<span class="keywordtype">object</span>);</div><div class="line"></div><div class="line">    <span class="comment">// destructor, other methods, etc...</span></div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    <span class="keywordtype">int</span> salt;</div><div class="line">    <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtautoupdater/qtautoupdater.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/class_q_object.html">QObject</a> *object;</div><div class="line">};</div><div class="line"></div><div class="line">Q_DECLARE_METATYPE(Foo) <span class="comment">//important</span></div></div><!-- fragment --><p>This class is neither a gadget nor an object, and thus be default not serializable. For this example, we want to get the following json out of the serializer for this type:</p>
<div class="fragment"><div class="line">{</div><div class="line">    &quot;salt&quot;: &lt;number&gt;</div><div class="line">    &quot;object&quot;: &lt;whatever QObjects serialize to&gt;</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="class"></a>
The Converter class</h2>
<p>To do this, we implement our custom type converter: </p><div class="fragment"><div class="line"><span class="keyword">class </span>QJsonFooConverter : <span class="keyword">public</span> <a class="code" href="class_q_json_type_converter.html">QJsonTypeConverter</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keywordtype">bool</span> <a class="code" href="class_q_json_type_converter.html#a63168cc2f7e185f79cac9208a2e6d5e8">canConvert</a>(<span class="keywordtype">int</span> metaTypeId) <span class="keyword">const override</span>;</div><div class="line">    <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qlist.html">QList&lt;QJsonValue::Type&gt;</a> <a class="code" href="class_q_json_type_converter.html#a1fd5c728302100b50b49bf47a3d213d5">jsonTypes</a>() <span class="keyword">const override</span>;</div><div class="line">    <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qjsonvalue.html">QJsonValue</a> <a class="code" href="class_q_json_type_converter.html#abeeba52f509cec3eb4c80b5b7dc07604">serialize</a>(<span class="keywordtype">int</span> propertyType, <span class="keyword">const</span> <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qvariant.html">QVariant</a> &amp;value, <span class="keyword">const</span> SerializationHelper *helper) <span class="keyword">const override</span>;</div><div class="line">    <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qvariant.html">QVariant</a> <a class="code" href="class_q_json_type_converter.html#af162ac051c8a5c9d168a1deecf5e0ae7">deserialize</a>(<span class="keywordtype">int</span> propertyType, <span class="keyword">const</span> <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qjsonvalue.html">QJsonValue</a> &amp;value, <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtautoupdater/qtautoupdater.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/class_q_object.html">QObject</a> *parent, <span class="keyword">const</span> SerializationHelper *helper) <span class="keyword">const override</span>;</div><div class="line">};</div></div><!-- fragment --><p>There are 4 methods to be implemented. In addition to that, there is also the <a class="el" href="class_q_json_type_converter.html#ac40884acbfba06f74ce210de7aedf6ea" title="Returns the priority of this converter. ">QJsonTypeConverter::priority</a>. It is not relevant for this example, but might be for your special case.</p>
<h3><a class="anchor" id="class_canConvert"></a>
The `canConvert` method</h3>
<p>This method is called be the serializer to determine whether your converter can handle a specific type or not. In our case, all that needs to be done is to check if the passed type is our Foo type: </p><div class="fragment"><div class="line"><span class="keywordtype">bool</span> QJsonFooConverter::canConvert(<span class="keywordtype">int</span> metaTypeId)<span class="keyword"> const</span></div><div class="line"><span class="keyword"></span>{</div><div class="line">    <span class="keywordflow">return</span> metaTypeId == qMetaTypeId&lt;Foo&gt;();</div><div class="line">}</div></div><!-- fragment --><h3><a class="anchor" id="class_jsonTypes"></a>
The `jsonTypes` method</h3>
<p>This method is called be the serializer to determine which json types your converter can deserialize. For the example, we serialize to a json object, and thus can only deserialize json objects as well. </p><div class="fragment"><div class="line"><a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qlist.html">QList&lt;QJsonValue::Type&gt;</a> QJsonFooConverter::jsonTypes()<span class="keyword"> const</span></div><div class="line"><span class="keyword"></span>{</div><div class="line">    <span class="keywordflow">return</span> {QJsonValue::Object};</div><div class="line">}</div></div><!-- fragment --><h3><a class="anchor" id="class_serialize"></a>
The `serialize` method</h3>
<p>This method contains the actual code to convert our c++ Foo object into a json object. This is easy for the interger type <code>salt</code>, as json has numbers. But for the object, we want the <a class="el" href="class_q_json_serializer.html" title="A class to serializer and deserializer c++ classes to and from JSON. ">QJsonSerializer</a> to do the work for as. To do this, we make use of the <a class="el" href="class_q_json_type_converter_1_1_serialization_helper.html" title="Helper class passed to the type converter by the serializer. Do not implement yourself. ">SerializationHelper</a> that is passed as last paremeter of the serialize method. </p><div class="fragment"><div class="line"><a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qjsonvalue.html">QJsonValue</a> QJsonFooConverter::serialize(<span class="keywordtype">int</span> propertyType, <span class="keyword">const</span> <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qvariant.html">QVariant</a> &amp;value, <span class="keyword">const</span> SerializationHelper *helper)<span class="keyword"> const</span></div><div class="line"><span class="keyword"></span>{</div><div class="line">    <span class="keyword">auto</span> foo = value.<a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qvariant.html#value">value</a>&lt;Foo&gt;(); <span class="comment">//convert the QVariant parameter to our Foo type</span></div><div class="line">    <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtdatasync/qtdatasync.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/class_q_json_object.html">QJsonObject</a> fooJson;<span class="comment">//create the json</span></div><div class="line">    fooJson[<span class="stringliteral">&quot;salt&quot;</span>] = foo.salt;</div><div class="line">    fooJson[<span class="stringliteral">&quot;object&quot;</span>] = helper-&gt;serializeSubtype(QMetaType::QObjectStar, <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qvariant.html#fromValue">QVariant::fromValue</a>(foo.object), <span class="stringliteral">&quot;object&quot;</span>);</div><div class="line">    <span class="keywordflow">return</span> fooJson;</div><div class="line">}</div></div><!-- fragment --><p>We pass 3 arguments to the <a class="el" href="class_q_json_type_converter_1_1_serialization_helper.html#abdb0a1c4e75c057e9b836ee220742a6a" title="Serialize a subvalue, represented by a meta property. ">SerializationHelper::serializeSubtype</a> method. The first one is the type of what we want to get serialized. In this case, a pointer to <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtautoupdater/qtautoupdater.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/class_q_object.html">QObject</a>. The second is the actual value, converted to <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qvariant.html">QVariant</a>. The third parameter is a hint in case of an exception. It basically means: If something goes wrong it was somewhere in the object field of the Foo class.</p>
<dl class="section note"><dt>Note</dt><dd>If you need to do error handling, i.e. fail in case of an error, do so by throwing a <a class="el" href="class_q_json_serialization_exception.html" title="Exception thrown by QJsonSerializer if something goes wrong while serializing. ">QJsonSerializationException</a></dd></dl>
<h3><a class="anchor" id="class_deserialize"></a>
The `deserialize` method</h3>
<p>This method contains the actual code to convert a json object into our c++ Foo object. This is easy for the interger type <code>salt</code>, as json has numbers. But for the object, we want the <a class="el" href="class_q_json_serializer.html" title="A class to serializer and deserializer c++ classes to and from JSON. ">QJsonSerializer</a> to do the work for as. To do this, we make use of the <a class="el" href="class_q_json_type_converter_1_1_serialization_helper.html" title="Helper class passed to the type converter by the serializer. Do not implement yourself. ">SerializationHelper</a> that is passed as last paremeter of the deserialize method. </p><div class="fragment"><div class="line"><a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qvariant.html">QVariant</a> QJsonFooConverter::deserialize(<span class="keywordtype">int</span> propertyType, <span class="keyword">const</span> <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qjsonvalue.html">QJsonValue</a> &amp;value, <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtautoupdater/qtautoupdater.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/class_q_object.html">QObject</a> *parent, <span class="keyword">const</span> SerializationHelper *helper)<span class="keyword"> const</span></div><div class="line"><span class="keyword"></span>{</div><div class="line">    Q_UNUSED(parent); <span class="comment">//not used because we own the object</span></div><div class="line">    <span class="keyword">auto</span> jsonFoo = value.<a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qjsonvalue.html#toObject-1">toObject</a>(); <span class="comment">//convert json value to a json object</span></div><div class="line"></div><div class="line">    <span class="comment">//check if salt is what you expect it to be</span></div><div class="line">    <span class="keywordflow">if</span>(!jsonFoo[<span class="stringliteral">&quot;salt&quot;</span>].isDouble())</div><div class="line">        <span class="keywordflow">throw</span> <a class="code" href="class_q_json_deserialization_exception.html">QJsonDeserializationException</a>(<span class="stringliteral">&quot;No json valued named salt with number type&quot;</span>);</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> <span class="keywordtype">object</span> = helper-&gt;deserializeSubtype(QMetaType::QObjectStar, jsonFoo[<span class="stringliteral">&quot;object&quot;</span>], <span class="keyword">nullptr</span>, <span class="stringliteral">&quot;object&quot;</span>);</div><div class="line">    Foo foo(jsonFoo[<span class="stringliteral">&quot;salt&quot;</span>].toInt(), <span class="keywordtype">object</span>);</div><div class="line">    <span class="keywordflow">return</span> <a class="codeRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qvariant.html#fromValue">QVariant::fromValue</a>(foo);</div><div class="line">}</div></div><!-- fragment --><p>We pass 4 arguments to the <a class="el" href="class_q_json_type_converter_1_1_serialization_helper.html#abdb0a1c4e75c057e9b836ee220742a6a" title="Serialize a subvalue, represented by a meta property. ">SerializationHelper::serializeSubtype</a> method. The first one is the type of what we want to get deserialized. In this case, a pointer to <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtautoupdater/qtautoupdater.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/class_q_object.html">QObject</a>. The second is the actual json value. The third argument is parent for the <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtautoupdater/qtautoupdater.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/class_q_object.html">QObject</a>. In our case, the Foo class owns the object, and thus the object should not have a parent, and we pass nullptr. The fourth parameter is a hint in case of an exception. It basically means: If something goes wrong it was somewhere in the object field of the Foo class.</p>
<dl class="section note"><dt>Note</dt><dd>If you need to do error handling, i.e. fail in case of an error, do so by throwing a <a class="el" href="class_q_json_deserialization_exception.html" title="Exception thrown by QJsonSerializer if something goes wrong while deserializing. ">QJsonDeserializationException</a></dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_q_json_serializer.html#a812d2ba38850dc750a31a451bcbb8781" title="Adds a custom type converter to this serializer. ">QJsonSerializer::addJsonTypeConverter</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="qjsontypeconverter_8h_source.html#l00013">13</a> of file <a class="el" href="qjsontypeconverter_8h_source.html">qjsontypeconverter.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a63168cc2f7e185f79cac9208a2e6d5e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63168cc2f7e185f79cac9208a2e6d5e8">&#9670;&nbsp;</a></span>canConvert()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QJsonTypeConverter::canConvert </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>metaTypeId</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true, if this implementation can convert the given type. </p>
<dl class="section return"><dt>Returns</dt><dd>true, if this converter can convert the given type, false otherwise</dd></dl>
<p>If you return true for this method, it is expected your implementation can successfully de/serialize any <em>valid</em> instance for the given type. If you can't, serialization will fail, and no other converter get's a chance to try</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_q_json_type_converter.html#example">Example</a> Example, <a class="el" href="class_q_json_type_converter.html#a1fd5c728302100b50b49bf47a3d213d5" title="Returns a list of json types this implementation can deserialize. ">QJsonTypeConverter::jsonTypes</a> </dd></dl>

</div>
</div>
<a id="af162ac051c8a5c9d168a1deecf5e0ae7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af162ac051c8a5c9d168a1deecf5e0ae7">&#9670;&nbsp;</a></span>deserialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QJsonTypeConverter::deserialize </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>propertyType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qjsonvalue.html">QJsonValue</a> &amp;&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtautoupdater/qtautoupdater.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/class_q_object.html">QObject</a> *&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_q_json_type_converter_1_1_serialization_helper.html">SerializationHelper</a> *&#160;</td>
          <td class="paramname"><em>helper</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called by the deserializer to serializer your given type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">propertyType</td><td>The type of the data to deserialize </td></tr>
    <tr><td class="paramname">value</td><td>The value to deserialize, as json value </td></tr>
    <tr><td class="paramname">parent</td><td>A parent object, in case you create a <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtautoupdater/qtautoupdater.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/class_q_object.html">QObject</a> class you can pass it as parent </td></tr>
    <tr><td class="paramname">helper</td><td>A <a class="el" href="class_q_json_type_converter_1_1_serialization_helper.html" title="Helper class passed to the type converter by the serializer. Do not implement yourself. ">SerializationHelper</a>, in case you need to deserialize subtypes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The deserialized data, wrapped as <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qvariant.html">QVariant</a> </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="class_q_json_deserialization_exception.html" title="Exception thrown by QJsonSerializer if something goes wrong while deserializing. ">QJsonDeserializationException</a></td><td>In case something goes wrong, invalid data, etc.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_q_json_type_converter.html#example">Example</a> Example, <a class="el" href="class_q_json_type_converter.html#abeeba52f509cec3eb4c80b5b7dc07604" title="Called by the serializer to serializer your given type. ">QJsonTypeConverter::serialize</a>, <a class="el" href="class_q_json_type_converter_1_1_serialization_helper.html" title="Helper class passed to the type converter by the serializer. Do not implement yourself. ">SerializationHelper</a> </dd></dl>

</div>
</div>
<a id="a1fd5c728302100b50b49bf47a3d213d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fd5c728302100b50b49bf47a3d213d5">&#9670;&nbsp;</a></span>jsonTypes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QJsonTypeConverter::jsonTypes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a list of json types this implementation can deserialize. </p>
<dl class="section return"><dt>Returns</dt><dd>A list of all supported json types for deserialization</dd></dl>
<p>It is possible to return no or multiple types. Your implementation must be able to deserialize any combination of the returned types and the metatypes accepted by <a class="el" href="class_q_json_type_converter.html#a63168cc2f7e185f79cac9208a2e6d5e8" title="Returns true, if this implementation can convert the given type. ">QJsonTypeConverter::canConvert</a>. This is very important.</p>
<p>In case only specific combinations are allowed, split your implementation up into multiple converters.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_q_json_type_converter.html#example">Example</a> Example, <a class="el" href="class_q_json_type_converter.html#a63168cc2f7e185f79cac9208a2e6d5e8" title="Returns true, if this implementation can convert the given type. ">QJsonTypeConverter::canConvert</a> </dd></dl>

</div>
</div>
<a id="ac40884acbfba06f74ce210de7aedf6ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac40884acbfba06f74ce210de7aedf6ea">&#9670;&nbsp;</a></span>priority()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QJsonTypeConverter::priority </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the priority of this converter. </p>
<dl class="section return"><dt>Returns</dt><dd>The priority of the converter</dd></dl>
<p>The priority is important for cases where multiple converters can handle the same type. The converter with the highest priority wins. The default value is 0, and so are all converters internally used by the library. The property can be set either by your implementation (i.e. in the constructor), or dynamically before adding the converter to a serializer.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_q_json_type_converter.html#a9ac88a7b6e3e954b825afd56d1558b6d" title="Sample values for a priority value. ">QJsonTypeConverter::Priority</a>, <a class="el" href="class_q_json_type_converter.html#a7ec07ecf9eddf8ab115735455c671def" title="Sets the priority of this converter. ">QJsonTypeConverter::setPriority</a>, _qjsonserializer_helpertypes </dd></dl>

</div>
</div>
<a id="abeeba52f509cec3eb4c80b5b7dc07604"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abeeba52f509cec3eb4c80b5b7dc07604">&#9670;&nbsp;</a></span>serialize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">QJsonTypeConverter::serialize </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>propertyType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qvariant.html">QVariant</a> &amp;&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_q_json_type_converter_1_1_serialization_helper.html">SerializationHelper</a> *&#160;</td>
          <td class="paramname"><em>helper</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called by the serializer to serializer your given type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">propertyType</td><td>The type of the data to serialize </td></tr>
    <tr><td class="paramname">value</td><td>The value to serialize, wrapped as <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.10.1/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qvariant.html">QVariant</a> </td></tr>
    <tr><td class="paramname">helper</td><td>A <a class="el" href="class_q_json_type_converter_1_1_serialization_helper.html" title="Helper class passed to the type converter by the serializer. Do not implement yourself. ">SerializationHelper</a>, in case you need to serialize subtypes </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A json value with the serialized data of value </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="class_q_json_serialization_exception.html" title="Exception thrown by QJsonSerializer if something goes wrong while serializing. ">QJsonSerializationException</a></td><td>In case something goes wrong, invalid data, etc.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_q_json_type_converter.html#example">Example</a> Example, <a class="el" href="class_q_json_type_converter.html#af162ac051c8a5c9d168a1deecf5e0ae7" title="Called by the deserializer to serializer your given type. ">QJsonTypeConverter::deserialize</a>, <a class="el" href="class_q_json_type_converter_1_1_serialization_helper.html" title="Helper class passed to the type converter by the serializer. Do not implement yourself. ">SerializationHelper</a> </dd></dl>

</div>
</div>
<a id="a7ec07ecf9eddf8ab115735455c671def"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ec07ecf9eddf8ab115735455c671def">&#9670;&nbsp;</a></span>setPriority()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QJsonTypeConverter::setPriority </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>priority</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the priority of this converter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">priority</td><td>The priority of the converter</td></tr>
  </table>
  </dd>
</dl>
<p>The priority is important for cases where multiple converters can handle the same type. The converter with the highest priority wins. The default value is 0, and so are all converters internally used by the library. The property can be set either by your implementation (i.e. in the constructor), or dynamically before adding the converter to a serializer.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_q_json_type_converter.html#a9ac88a7b6e3e954b825afd56d1558b6d" title="Sample values for a priority value. ">QJsonTypeConverter::Priority</a>, <a class="el" href="class_q_json_type_converter.html#ac40884acbfba06f74ce210de7aedf6ea" title="Returns the priority of this converter. ">QJsonTypeConverter::priority</a> </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="qjsontypeconverter_8h_source.html">qjsontypeconverter.h</a></li>
<li>qjsontypeconverter.dox</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Apr 27 2018 00:20:52 for QtJsonSerializer by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
